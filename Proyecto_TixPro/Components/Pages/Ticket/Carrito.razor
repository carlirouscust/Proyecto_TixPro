@page "/Ticket/Carrito/{eventoId:int}"
@inject EventosService eventosService
@inject UsuariosService usuarioService
@rendermode InteractiveServer
@inject NavigationManager navigationManager

<h3>Carrito de Compras</h3>
<EditForm Model="evento"> 
    <div class="main-container">
        <div class="row">
        <!-- Contenedor Izquierdo: Detalles del Evento -->
        <div class="left-container col-md-6">
            <h4>Datos de contacto</h4>
            <div class="mb-2">
                <label for="Nombres" class="form-label">Nombre completo:</label>
                <InputText @bind-Value="evento.nombre" class="form-control col-md-6" />
                <ValidationMessage For="@(() => usuario.nombre)" />
            </div>
            <div class="mb-2">
                <label for="Correo" class="form-label">Correo electrónico:</label>
                <InputText @bind-Value="evento.nombre" class="form-control col-md-6" />
                <ValidationMessage For="@(() => usuario.email)" />
            </div>

            <h4>Información de pago</h4>
        </div>


        <!-- Contenedor Derecho: Carrito de Compras -->
        <div class="right-container col-md-6">
            <!-- Fila (row) para contener la imagen y el contenido de texto -->
            <div class="row align-items-center">
                <!-- Columna para la imagen -->
                <div class="col-md-6 d-flex justify-content-center">
                    <img class="card-img" src="@evento.imagen" alt="Imagen del Evento" style="height: 300px; width: auto;">
                </div>
                <!-- Columna para el contenido de texto -->
                <div class="col-md-6">
                    <div class="card-body">
                        <h5 class="fw-bold">@evento.nombre</h5>
                        <p><i class="bi bi-calendar4-week"></i> @evento.lugar</p>
                        <p><i class="bi bi-geo-alt"></i> @evento.fecha</p>
                    </div>
                    <hr />
                    <p class="text-muted">
                        <span class="text-dark fw-bold">RD$ @evento.precio</span>
                    </p>
                    <hr />
                    <h6>Sub Total</h6>
                    <h6>Crago de Servicio</h6>
                    <hr />
                    <h6>Total a Pagar</h6>
                </div>
            </div>
        </div>
        </div>
    </div>
</EditForm>
@code {
    [Parameter]
    public int eventoId { get; set; }
    public Evento evento { get; set; } = new Evento();
    public int usuarioId { get; set; }
    public Usuario usuario { get; set; } = new Usuario();
    public int quantity { get; set; }
    public decimal totalPrice { get; set; }

    protected override async Task OnInitializedAsync()
    {
        evento = await eventosService.Buscar(eventoId);
        CalcularTotal();
    }



    private void CalcularTotal()
    {
        if (evento != null && quantity > 0)
        {
            totalPrice = evento.precio * quantity;
        }
    }

}
